 <!DOCTYPE html>
<html>
<head>
    <% include ../partials/head %>
</head>
<script>
$(document).ready(function() {
			

				$('#addTeilnehmer').submit(function(e) {
							e.preventDefault();
			
				 var teilnehmer = $('.addTeilnehmer').val();
				

							if(!teilnehmer) {
								alert('Bitte Teilnehmer spezifizieren.');
								return false;
								}

			 
			 var formData = {'teilnehmer' : teilnehmer};


							$.ajax({
								type: 'PUT',
								url: '/Turnier/<%= turnier.id %>/Teilnehmer',
								contentType: 'application/json',
								data: JSON.stringify(formData),
								success: function(data) {
									 $('#addTeilnehmer').each(function() {
                        this.reset();
                   });

							  $("#teiln ul").append('<li>'+teilnehmer+'</li>');
								
								},
								 statusCode: {
        409: function() {
           alert('Es dürfen keine weiteren Teilnehmer hinzugefügt werden.');
        }
        },
        fail: function() {
	        alert('Fehler');
        }
			
						});
						});
						
							$('#changeData').submit(function(e) {
							e.preventDefault();
			
				 var austragungszeitraum = $('.austragungszeitraum').val();
				 var status = $('.status').val();

							if(!(austragungszeitraum && status)) {
								alert('Bitte Daten spezifizieren.');
								return false;
								}
			 
			 var formData = {Austragungszeitraum : austragungszeitraum,
				 Status: status
			 };


							$.ajax({
								type: 'PUT',
								url: '/Turnier/<%= turnier.id %>',
								contentType: 'application/json',
								data: JSON.stringify(formData),
								success: function(data) {
									
									 $('#changeData').each(function() {
                        this.reset();
                   });
                   
                   

							  $("#austr").text('Austragungszeitraum: '+data.Austragungszeitraum);
							   $("#stat").text('Status: '+data.Status);
								
								},
        fail: function() {
	        alert('Fehler');
        }
			
						});
						});
						
						});

						</script>
<body class="container">
  <header>
        <% include ../partials/header %>
    </header>
 <main>
        <div class="row">
            <div class="col-sm-8">
            
                <div class="jumbotron">
                    <h1>Turnier <%= turnier.id %></h1>
                   <br />
                     <ul>
            <li>Anzahl Teilnehmer: <%= turnier.Teilnehmeranzahl %></li>
              <li> Teamgröße: <%= turnier.Teamgroesse %></li>
              <li> Typ: <%= turnier.Typ %></li>
               <li id="austr"> Austragungszeitraum: <%= turnier.Austragungszeitraum %></li>
              <li id="stat"> Status: <%= turnier.Status %></li>
                    </ul> 
                    <br />
                    Teilnehmer hinzufügen:
                    <div id="teiln">
                    <ul>
                    <% if (turnier.Teilnehmer) { %>
                      <% for(var i=0; i < turnier.Teilnehmer.length; i++) { %>
                    <li><%= turnier.Teilnehmer[i] %></li>
                    <% }}; %>
                    </ul>
                    </div>
                    
                    <div id="divteilnehmer">
                    <form action="" method="POST" name="addTeilnehmer" id="addTeilnehmer"><label for="teilnehmer">Teilnehmer:</label><br><input type="text" class="addTeilnehmer" name="benutzer"><input type="submit" name="send" value="Submit" /></form></div>
                    <br />
                     Turnierdaten ändern:
                    <br />
                    <div id="divdata">
                    <form action="" method="POST" name="changeData" id="changeData"><label for="austragungszeitraum">Austragungszeitraum:</label><br><input type="text" class="austragungszeitraum" name="austragungszeitraum"><br /><label for="status">Status:</label><br><input type="text" class="status" name="status"><input type="submit" name="change" value="Submit" /></form></div>
<br />
<h4>Spielplan</h4>
<br />
		   
                   <table class="table">
    <thead>
      <tr>
        <th>Team 1</th>
        <th>Team 2</th>
        <th>Runde</th>
      </tr>
    </thead>
    <tbody>
      <% for(var i=0; i < turnier.Spielplan.length; i++) { %>
      <tr>
        <td><%= turnier.Spielplan[i].Team1 %></td>
         <td><%= turnier.Spielplan[i].Team2 %></td>
          <td><%= turnier.Spielplan[i].Runde %></td>
       </tr>
     
     <% }; %> 
    </tbody>
  </table>   
  	       
                </div>
                
            </div>
           
        </div>
    </main>
 <footer>
        <% include ../partials/footer %>
    </footer>
    
</body>
</html>